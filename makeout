cc -flto -Wall -Wextra -Wpedantic -std=gnu11 -nostartfiles -fno-PIC -Os -fno-plt -fwhole-program -fno-stack-protector -fno-stack-check -fno-unwind-tables -fno-asynchronous-unwind-tables -fno-exceptions  -funsafe-math-optimizations -fomit-frame-pointer -ffast-math -no-pie -fno-pic -march=i386 -mtune=i386 -ffunction-sections -fdata-sections -fno-plt   -m32 -I/usr/include/SDL2 -D_REENTRANT  -c "test/tetris.c" -o "obj/tetris.lto.o"
cc -flto -Wall -Wextra -Wpedantic -std=gnu11 -nostartfiles -fno-PIC -Os -fno-plt -fwhole-program -fno-stack-protector -fno-stack-check -fno-unwind-tables -fno-asynchronous-unwind-tables -fno-exceptions  -funsafe-math-optimizations -fomit-frame-pointer -ffast-math -no-pie -fno-pic -march=i386 -mtune=i386 -ffunction-sections -fdata-sections -fno-plt   -m32 -I/usr/include/SDL2 -D_REENTRANT  -c "rt/crt1.c" -o "obj/crt1.lto.o"
cc -m32 -Wl,--build-id=none -Wl,--hash-style=gnu -Wl,-z,norelro -nostartfiles -nostdlib  -r -o "obj/tetris.start.o" obj/tetris.lto.o obj/crt1.lto.o
python3 src/smol.py -s -lc -lSDL2 "obj/tetris.start.o" "obj/symbols.tetris.start.asm"
nasm -I rt/ -f elf32 -DUSE_INTERP -DNO_START_ARG -DUNSAFE_DYNAMIC -DUSE_DNLOAD_LOADER  obj/symbols.tetris.start.asm -o obj/stub.tetris.start.o
cc -Wl,-Map=bin/tetris-crt.map -m32 -T ld/link.ld -Wl,--oformat=binary -m32 -Wl,--build-id=none -Wl,--hash-style=gnu -Wl,-z,norelro -nostartfiles -nostdlib  obj/tetris.start.o obj/stub.tetris.start.o -o "bin/tetris-crt"
mv "bin/tetris-crt" t
lzma --format=lzma -9 --extreme --lzma1=preset=9,lc=0,lp=0,pb=0 t
cat ext/vondehi t.lzma > "bin/tetris-crt"
rm t.lzma
chmod +x "bin/tetris-crt"
echo "Size of bin/tetris-crt:"; (stat -c%s "bin/tetris-crt")
Size of bin/tetris-crt:
1963
